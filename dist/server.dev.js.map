{"version":3,"sources":["server.js"],"names":["express","require","fs","path","app","PORT","process","env","use","urlencoded","extended","json","allNotes","JSON","parse","readFileSync","writeNotes","notesArray","writeFileSync","stringify","get","req","res","sendFile","join","__dirname","post","newNote","body","id","length","push","idToDelete","params","noteToDelete","find","note","indexToDelete","indexOf","splice","listen","console","log"],"mappings":";;AAAA;AACA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB,C,CAEA;;;AACA,IAAMG,GAAG,GAAGJ,OAAO,EAAnB;AACA,IAAMK,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC,C,CAEA;;AACAD,GAAG,CAACI,GAAJ,CAAQR,OAAO,CAACS,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAN,GAAG,CAACI,GAAJ,CAAQR,OAAO,CAACW,IAAR,EAAR;AACAP,GAAG,CAACI,GAAJ,CAAQR,OAAO,UAAP,CAAe,QAAf,CAAR,E,CAEA;;AACA,IAAMY,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWZ,EAAE,CAACa,YAAH,CAAgB,cAAhB,EAAgC,MAAhC,CAAX,CAAjB;;AACA,SAASC,UAAT,CAAoBC,UAApB,EAAgC;AAC9Bf,EAAAA,EAAE,CAACgB,aAAH,CAAiB,cAAjB,EAAiCL,IAAI,CAACM,SAAL,CAAeF,UAAf,CAAjC;AACD,C,CAED;;;AACAb,GAAG,CAACgB,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,EAAAA,GAAG,CAACC,QAAJ,CAAapB,IAAI,CAACqB,IAAL,CAAUC,SAAV,EAAqB,qBAArB,CAAb;AACD,CAFD;AAIArB,GAAG,CAACgB,GAAJ,CAAQ,QAAR,EAAkB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC9BA,EAAAA,GAAG,CAACC,QAAJ,CAAapB,IAAI,CAACqB,IAAL,CAAUC,SAAV,EAAqB,qBAArB,CAAb;AACD,CAFD;AAIArB,GAAG,CAACgB,GAAJ,CAAQ,YAAR,EAAsB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAClCA,EAAAA,GAAG,CAACX,IAAJ,CAASC,QAAT;AACD,CAFD,E,CAKA;;AACAR,GAAG,CAACsB,IAAJ,CAAS,YAAT,EAAuB,UAACL,GAAD,EAAMC,GAAN,EAAc;AACnC,MAAMK,OAAO,GAAGN,GAAG,CAACO,IAApB;AACAD,EAAAA,OAAO,CAACE,EAAR,GAAajB,QAAQ,CAACkB,MAAT,GAAkB,CAA/B;AACAlB,EAAAA,QAAQ,CAACmB,IAAT,CAAcJ,OAAd;AACAX,EAAAA,UAAU,CAACJ,QAAD,CAAV;AACAU,EAAAA,GAAG,CAACX,IAAJ,CAASgB,OAAT;AACD,CAND,E,CASA;;AACAvB,GAAG,UAAH,CAAW,gBAAX,EAA6B,UAACiB,GAAD,EAAMC,GAAN,EAAc;AACzC,MAAMU,UAAU,GAAGX,GAAG,CAACY,MAAJ,CAAWJ,EAA9B;AACA,MAAMK,YAAY,GAAGtB,QAAQ,CAACuB,IAAT,CAAc,UAACC,IAAD;AAAA,WAAUA,IAAI,CAACP,EAAL,IAAWG,UAArB;AAAA,GAAd,CAArB;AACA,MAAMK,aAAa,GAAGzB,QAAQ,CAAC0B,OAAT,CAAiBJ,YAAjB,CAAtB;AACAtB,EAAAA,QAAQ,CAAC2B,MAAT,CAAgBF,aAAhB,EAA+B,CAA/B;AACArB,EAAAA,UAAU,CAACJ,QAAD,CAAV;AACAU,EAAAA,GAAG,CAACX,IAAJ,CAAS,IAAT;AACD,CAPD;AASAP,GAAG,CAACoC,MAAJ,CAAWnC,IAAX,EAAiB,YAAM;AACrBoC,EAAAA,OAAO,CAACC,GAAR,iCAAqCrC,IAArC;AACD,CAFD","sourcesContent":["// Dependencies\r\nconst express = require('express');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\n// Set up the app\r\nconst app = express();\r\nconst PORT = process.env.PORT || 3001;\r\n\r\n// Middleware\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use(express.json());\r\napp.use(express.static('public'));\r\n\r\n// Read and write data to JSON file\r\nconst allNotes = JSON.parse(fs.readFileSync('./db/db.json', 'utf8'));\r\nfunction writeNotes(notesArray) {\r\n  fs.writeFileSync('./db/db.json', JSON.stringify(notesArray));\r\n}\r\n\r\n// Routes\r\napp.get('/', (req, res) => {\r\n  res.sendFile(path.join(__dirname, './public/index.html'));\r\n});\r\n\r\napp.get('/notes', (req, res) => {\r\n  res.sendFile(path.join(__dirname, './public/notes.html'));\r\n});\r\n\r\napp.get('/api/notes', (req, res) => {\r\n  res.json(allNotes);\r\n});\r\n\r\n\r\n// Note posting\r\napp.post('/api/notes', (req, res) => {\r\n  const newNote = req.body;\r\n  newNote.id = allNotes.length + 1;\r\n  allNotes.push(newNote);\r\n  writeNotes(allNotes);\r\n  res.json(newNote);\r\n});\r\n\r\n\r\n// Delete notes\r\napp.delete('/api/notes/:id', (req, res) => {\r\n  const idToDelete = req.params.id;\r\n  const noteToDelete = allNotes.find((note) => note.id == idToDelete);\r\n  const indexToDelete = allNotes.indexOf(noteToDelete);\r\n  allNotes.splice(indexToDelete, 1);\r\n  writeNotes(allNotes);\r\n  res.json(true);\r\n});\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`App listening on PORT ${PORT}`);\r\n});\r\n"],"file":"server.dev.js"}